---
prev: /tutorial/04-state
next: /tutorial/06-context
solvable: true
---

# Refs

–ö–∞–∫ –º—ã —É–∑–Ω–∞–ª–∏ –≤ –ø–µ—Ä–≤–æ–π –≥–ª–∞–≤–µ, DOM –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∏–º–ø–µ—Ä–∞—Ç–∏–≤–Ω—ã–π API, –ø–æ–∑–≤–æ–ª—è—é—â–∏–π –≤–Ω–æ—Å–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—É—Ç—ë–º –≤—ã–∑–æ–≤–∞ —Ñ—É–Ω–∫—Ü–∏–π –¥–ª—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤. –û–¥–Ω–∏–º –∏–∑ –ø—Ä–∏–º–µ—Ä–æ–≤, –∫–æ–≥–¥–∞ –Ω–∞–º –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è –¥–æ—Å—Ç—É–ø –∫ –∏–º–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–º—É DOM API –∏–∑ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ Preact, —è–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ —Ñ–æ–∫—É—Å–∞ –Ω–∞ —ç–ª–µ–º–µ–Ω—Ç –≤–≤–æ–¥–∞.

–°–≤–æ–π—Å—Ç–≤–æ `autoFocus` (–∏–ª–∏ –∞—Ç—Ä–∏–±—É—Ç `autofocus`) –º–æ–∂–µ—Ç –±—ã—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ –¥–ª—è —Ñ–æ–∫—É—Å–∏—Ä–æ–≤–∫–∏ –≤–≤–æ–¥–∞ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –µ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–∏, –æ–¥–Ω–∞–∫–æ –±—ã–≤–∞—é—Ç —Å–∏—Ç—É–∞—Ü–∏–∏, –∫–æ–≥–¥–∞ –º—ã —Ö–æ—Ç–∏–º –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å —Ñ–æ–∫—É—Å –Ω–∞ –≤–≤–æ–¥ –≤ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–µ –≤—Ä–µ–º—è –∏–ª–∏ –≤ –æ—Ç–≤–µ—Ç –Ω–∞ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–µ —Å–æ–±—ã—Ç–∏–µ.

–î–ª—è —Ç–∞–∫–∏—Ö —Å–ª—É—á–∞–µ–≤, –∫–æ–≥–¥–∞ –Ω–∞–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –Ω–∞–ø—Ä—è–º—É—é –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å —Å —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏ DOM, –º—ã –º–æ–∂–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é, –Ω–∞–∑—ã–≤–∞–µ–º—É—é ¬´refs¬ª. –°—Å—ã–ª–∫–∞ `ref` ‚Äî —ç—Ç–æ –æ–±—ã—á–Ω—ã–π JavaScript-–æ–±—ä–µ–∫—Ç —Å–æ —Å–≤–æ–π—Å—Ç–≤–æ–º `current`, –∫–æ—Ç–æ—Ä–æ–µ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –ª—é–±–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ. –û–±—ä–µ–∫—Ç—ã JavaScript –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –ø–æ —Å—Å—ã–ª–∫–µ, —á—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –ª—é–±–∞—è —Ñ—É–Ω–∫—Ü–∏—è, –∏–º–µ—é—â–∞—è –¥–æ—Å—Ç—É–ø –∫ –æ–±—ä–µ–∫—Ç—É `ref`, –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –∏–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –µ–≥–æ –∑–Ω–∞—á–µ–Ω–∏–µ —Å –ø–æ–º–æ—â—å—é —Å–≤–æ–π—Å—Ç–≤–∞ `current`. Preact –Ω–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –æ–±—ä–µ–∫—Ç–æ–≤ `ref`, –ø–æ—ç—Ç–æ–º—É –æ–Ω–∏ –º–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –≤–æ –≤—Ä–µ–º—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞, –∫ –∫–æ—Ç–æ—Ä–æ–π –≤–ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏–∏ –º–æ–∂–µ—Ç –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –ª—é–±–∞—è —Ñ—É–Ω–∫—Ü–∏—è, –∏–º–µ—é—â–∞—è –¥–æ—Å—Ç—É–ø –∫ –æ–±—ä–µ–∫—Ç—É `ref`.

–ú—ã –º–æ–∂–µ–º —É–≤–∏–¥–µ—Ç—å, –∫–∞–∫ –≤—ã–≥–ª—è–¥–∏—Ç –ø—Ä—è–º–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `ref` –±–µ–∑ –æ—Ç—Ä–∏—Å–æ–≤–∫–∏ —á–µ–≥–æ-–ª–∏–±–æ:

```js
import { createRef } from 'preact';

// —Å–æ–∑–¥–∞–Ω–∏–µ ref:
const ref = createRef('initial value');
// { current: 'initial value' }

// —á—Ç–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è ref:
ref.current === 'initial value';

// –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è ref:
ref.current = 'new value';

// –ø–µ—Ä–µ–¥–∞—á–∞ ref:
console.log(ref); // { current: 'new value' }
```

–ü–æ–ª–µ–∑–Ω–æ—Å—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å—Å—ã–ª–æ–∫ –≤ Preact –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ —Ç–æ–º, —á—Ç–æ –æ–±—ä–µ–∫—Ç —Å—Å—ã–ª–∫–∏ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–µ—Ä–µ–¥–∞–Ω —ç–ª–µ–º–µ–Ω—Ç—É Virtual DOM –≤–æ –≤—Ä–µ–º—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞, –∏ Preact —É—Å—Ç–∞–Ω–æ–≤–∏—Ç –∑–Ω–∞—á–µ–Ω–∏–µ —Å—Å—ã–ª–∫–∏ (–µ—ë —Å–≤–æ–π—Å—Ç–≤–æ `current`) –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π HTML-—ç–ª–µ–º–µ–Ω—Ç. –ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –º—ã –º–æ–∂–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —Å—Å—ã–ª–∫–∏ –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∏ –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏ HTML-—ç–ª–µ–º–µ–Ω—Ç–∞:

```jsx
import { createRef } from 'preact';

// —Å–æ–∑–¥–∞–Ω–∏–µ ref:
const input = createRef();

// –ø–µ—Ä–µ–¥–∞—á–∞ ref –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∞—Ç—Ä–∏–±—É—Ç–∞ —ç–ª–µ–º–µ–Ω—Ç–∞ Virtual DOM
render(<input ref={input} />, document.body);

// –¥–æ—Å—Ç—É–ø –∫ –∞—Å—Å–æ—Ü–∏–∏—Ä–æ–≤–∞–Ω–Ω–æ–º—É —ç–ª–µ–º–µ–Ω—Ç—É DOM:
input.current; // —ç–ª–µ–º–µ–Ω—Ç HTML <input>
input.current.focus(); // —Ñ–æ–∫—É—Å–∏—Ä–æ–≤–∫–∞ –≤–≤–æ–¥–∞
```

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `createRef()` –≥–ª–æ–±–∞–ª—å–Ω–æ –Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è, —Ç–∞–∫ –∫–∞–∫ –ø—Ä–∏ –º–Ω–æ–≥–æ–∫—Ä–∞—Ç–Ω–æ–º —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–µ —Ç–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —Å—Å—ã–ª–∫–∏ –±—É–¥–µ—Ç –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∞–Ω–æ. –í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –ª—É—á—à–µ –≤—Å–µ–≥–æ —Ö—Ä–∞–Ω–∏—Ç—å —Å—Å—ã–ª–∫–∏ –∫–∞–∫ —Å–≤–æ–π—Å—Ç–≤–∞ –∫–ª–∞—Å—Å–∞:

```jsx
import { createRef, Component } from 'preact';

export default class App extends Component {
  input = createRef();

  // —ç—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ <App>
  componentDidMount() {
    // –¥–æ—Å—Ç—É–ø –∫ –∞—Å—Å–æ—Ü–∏–∏—Ä–æ–≤–∞–Ω–Ω–æ–º—É —ç–ª–µ–º–µ–Ω—Ç—É DOM:
    this.input.current.focus();
  }

  render() {
    return <input ref={this.input} />;
  }
}
```

–î–ª—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ —Ö—É–∫ `useRef()` –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —É–¥–æ–±–Ω—ã–π —Å–ø–æ—Å–æ–± —Å–æ–∑–¥–∞–Ω–∏—è —Å—Å—ã–ª–∫–∏ –∏ –¥–æ—Å—Ç—É–ø–∞ –∫ –Ω–µ–π –ø—Ä–∏ –ø–æ—Å–ª–µ–¥—É—é—â–∏—Ö –æ—Ç—Ä–∏—Å–æ–≤–∫–∞—Ö. –í —Å–ª–µ–¥—É—é—â–µ–º –ø—Ä–∏–º–µ—Ä–µ —Ç–∞–∫–∂–µ –ø–æ–∫–∞–∑–∞–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ö—É–∫–∞ `useEffect()` –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –æ–±—Ä–∞—Ç–Ω–æ–≥–æ –≤—ã–∑–æ–≤–∞ –ø–æ—Å–ª–µ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –Ω–∞—à–µ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞, –≤ –∫–æ—Ç–æ—Ä–æ–º —Ç–µ–∫—É—â–∏–º –∑–Ω–∞—á–µ–Ω–∏–µ–º `ref` —Å—Ç–∞–Ω–µ—Ç HTML-—ç–ª–µ–º–µ–Ω—Ç `input`:

```jsx
import { useRef, useEffect } from 'preact/hooks';

export default function App() {
  // —Å–æ–∑–¥–∞–Ω–∏–µ –∏–ª–∏ –ø–æ–ª—É—á–µ–Ω–∏–µ ref
  const input = useRef();

  // –∑–¥–µ—Å—å –æ–±—Ä–∞—Ç–Ω—ã–π –≤—ã–∑–æ–≤ –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –ø–æ—Å–ª–µ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ <App>:
  useEffect(() => {
    // –¥–æ—Å—Ç—É–ø –∫ –∞—Å—Å–æ—Ü–∏–∏—Ä–æ–≤–∞–Ω–Ω–æ–º—É —ç–ª–µ–º–µ–Ω—Ç—É DOM:
    input.current.focus();
  }, []);

  return <input ref={input} />;
}
```

–ü–æ–º–Ω–∏—Ç–µ, —á—Ç–æ _refs_ –Ω–µ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞—é—Ç—Å—è —Ö—Ä–∞–Ω–µ–Ω–∏–µ–º —Ç–æ–ª—å–∫–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ DOM. –û–Ω–∏ –º–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –º–µ–∂–¥—É —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞–º–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –±–µ–∑ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è, –≤—ã–∑—ã–≤–∞—é—â–µ–≥–æ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥. –í –æ–¥–Ω–æ–π –∏–∑ —Å–ª–µ–¥—É—é—â–∏—Ö –≥–ª–∞–≤ –º—ã —É–≤–∏–¥–∏–º, –∫–∞–∫ —ç—Ç–æ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å.

## –ü–æ–ø—Ä–æ–±—É–π—Ç–µ!

–¢–µ–ø–µ—Ä—å –¥–∞–≤–∞–π—Ç–µ –ø—Ä–∏–º–µ–Ω–∏–º —ç—Ç–æ –Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ, —Å–æ–∑–¥–∞–≤ –∫–Ω–æ–ø–∫—É, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–∏ —â–µ–ª—á–∫–µ –º—ã—à–∏ —Ñ–æ–∫—É—Å–∏—Ä—É–µ—Ç –ø–æ–ª–µ –≤–≤–æ–¥–∞, –æ–±—Ä–∞—â–∞—è—Å—å –∫ –Ω–µ–º—É –ø–æ —Å—Å—ã–ª–∫–µ.

<solution>
  <h4>üéâ –ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º!</h4>
  <p><code>pro = createRef()</code> ‚Üí <code>pro.current = '–≤—ã'</code></p>
</solution>

```js:setup
function patch(input) {
  if (input.__patched) return;
  input.__patched = true;
  var old = input.focus;
  input.focus = function() {
    solutionCtx.setSolved(true);
    return old.call(this);
  };
}

useResult(function (result) {
  var expectedInput;
  var timer;
  [].forEach.call(result.output.querySelectorAll('input'), patch);

  var options = require('preact').options;

  var oe = options.event;
  options.event = function(e) {
    if (e.currentTarget.localName !== 'button') return;
    clearTimeout(timer);
    var input = e.currentTarget.parentNode.parentNode.querySelector('input');
    expectedInput = input;
    if (input) patch(input);
    timer = setTimeout(function() {
      if (expectedInput === input) {
        expectedInput = null;
      }
    }, 10);
    if (oe) return oe.apply(this, arguments);
  }

  return function () {
    options.event = oe;
  };
}, []);
```

```jsx:repl-initial
import { render } from 'preact';
import { useRef } from 'preact/hooks';

function App() {
  function onClick() {

  }

  return (
    <div>
      <input defaultValue="–ü—Ä–∏–≤–µ—Ç, –º–∏—Ä!" />
      <button onClick={onClick}>–ü–µ—Ä–µ–¥–∞—Ç—å —Ñ–æ–∫—É—Å —ç–ª–µ–º–µ–Ω—Ç—É –≤–≤–æ–¥–∞</button>
    </div>
  );
}

render(<App />, document.getElementById("app"));
```

```jsx:repl-final
import { render } from 'preact';
import { useRef } from 'preact/hooks';

function App() {
  const input = useRef();

  function onClick() {
    input.current.focus();
  }

  return (
    <div>
      <input ref={input} defaultValue="–ü—Ä–∏–≤–µ—Ç, –º–∏—Ä!" />
      <button onClick={onClick}>–ü–µ—Ä–µ–¥–∞—Ç—å —Ñ–æ–∫—É—Å —ç–ª–µ–º–µ–Ω—Ç—É –≤–≤–æ–¥–∞</button>
    </div>
  );
}

render(<App />, document.getElementById("app"));
```
