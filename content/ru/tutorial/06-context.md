---
prev: /tutorial/05-refs
next: /tutorial/07-side-effects
title: –ö–æ–Ω—Ç–µ–∫—Å—Ç
solvable: true
---

–ü–æ –º–µ—Ä–µ —Ä–æ—Å—Ç–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –µ–≥–æ –¥–µ—Ä–µ–≤–æ Virtual DOM —á–∞—Å—Ç–æ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –≥–ª—É–±–æ–∫–æ –≤–ª–æ–∂–µ–Ω–Ω—ã–º –∏ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–Ω—ã–µ –≤ —Ä–∞–∑–Ω—ã—Ö –º–µ—Å—Ç–∞—Ö –¥–µ—Ä–µ–≤–∞, –∏–Ω–æ–≥–¥–∞ –Ω—É–∂–¥–∞—é—Ç—Å—è –≤ –¥–æ—Å—Ç—É–ø–µ –∫ –æ–±—â–∏–º –¥–∞–Ω–Ω—ã–º ‚Äî –∫–∞–∫ –ø—Ä–∞–≤–∏–ª–æ, —ç—Ç–æ —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ã —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, —Ç–∞–∫–∏–µ –∫–∞–∫ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è, –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ—Ñ–∏–ª–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –∫—ç—à–∏, —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –∏ —Ç. –¥. –•–æ—Ç—è –º–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –≤—Å—é —ç—Ç—É –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –≤–Ω–∏–∑ –ø–æ –¥–µ—Ä–µ–≤—É –≤ –≤–∏–¥–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤, —ç—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –∫–∞–∂–¥—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å –Ω–µ–∫–æ—Ç–æ—Ä–æ–µ –æ—Å–æ–∑–Ω–∞–Ω–∏–µ –≤—Å–µ–≥–æ —ç—Ç–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è ‚Äî –¥–∞–∂–µ –µ—Å–ª–∏ –≤—Å—ë, —á—Ç–æ –æ–Ω–æ –¥–µ–ª–∞–µ—Ç, —ç—Ç–æ –ø–µ—Ä–µ–¥–∞–µ—Ç –µ–≥–æ –¥–∞–ª—å—à–µ –ø–æ –¥–µ—Ä–µ–≤—É.

–ö–æ–Ω—Ç–µ–∫—Å—Ç ‚Äî —ç—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è, –ø–æ–∑–≤–æ–ª—è—é—â–∞—è –Ω–∞–º –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è –≤–Ω–∏–∑ –ø–æ –¥–µ—Ä–µ–≤—É _–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏_, –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∏–Ω—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤. –î–ª—è —ç—Ç–æ–≥–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–æ–¥—Ö–æ–¥ ¬´–ø–æ—Å—Ç–∞–≤—â–∏–∫/–ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—å¬ª:

- `<Provider>` —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –≤ <abbr title="–î–µ—Ä–µ–≤–æ Virtual DOM –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö <Provider>...</Provider>, –≤–∫–ª—é—á–∞—è –≤—Å–µ –¥–æ—á–µ—Ä–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã">–ø–æ–¥–¥–µ—Ä–µ–≤–µ</abbr>
- `<Consumer>` –ø–æ–ª—É—á–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞, —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–µ –±–ª–∏–∂–∞–π—à–∏–º —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–º –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–º

–î–ª—è –Ω–∞—á–∞–ª–∞ –¥–∞–≤–∞–π—Ç–µ —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –ø—Ä–æ—Å—Ç–æ–π –ø—Ä–∏–º–µ—Ä —Ç–æ–ª—å–∫–æ —Å –æ–¥–Ω–∏–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–º. –í —ç—Ç–æ–º —Å–ª—É—á–∞–µ –º—ã –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ ¬´–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è¬ª _–∏_ –ø–æ—Ç—Ä–µ–±–ª—è–µ–º —ç—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ:

```jsx
import { createContext } from 'preact';

const Username = createContext();

export default function App() {
  return (
    // –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ username –Ω–∞—à–µ–º—É –ø–æ–¥–¥–µ—Ä–µ–≤—É:
    <Username.Provider value='–í–∞—Å—è'>
      <div>
        <p>
          <Username.Consumer>
            {(username) => (
              // –ø–æ–ª—É—á–∞–µ–º –¥–æ—Å—Ç—É–ø –∫ —Ç–µ–∫—É—â–µ–º—É –∏–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞:
              <span>{username}</span>
            )}
          </Username.Consumer>
        </p>
      </div>
    </Username.Provider>
  );
}
```

–í —Ä–µ–∞–ª—å–Ω–æ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç —Ä–µ–¥–∫–æ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –∏ –ø–æ—Ç—Ä–µ–±–ª—è–µ—Ç—Å—è –≤ —Ä–∞–º–∫–∞—Ö –æ–¥–Ω–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ ‚Äî —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –æ–±—ã—á–Ω–æ —è–≤–ª—è–µ—Ç—Å—è –ª—É—á—à–∏–º —Ä–µ—à–µ–Ω–∏–µ–º –¥–ª—è —ç—Ç–æ–≥–æ.

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å —Ö—É–∫–∞–º–∏

–ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–π API `<Consumer>` –¥–æ—Å—Ç–∞—Ç–æ—á–µ–Ω –¥–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ —Å–ª—É—á–∞–µ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è, –Ω–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —É—Ç–æ–º–∏—Ç–µ–ª—å–Ω—ã–º –≤ –Ω–∞–ø–∏—Å–∞–Ω–∏–∏, –ø–æ—Å–∫–æ–ª—å–∫—É –æ–ø–∏—Ä–∞–µ—Ç—Å—è –Ω–∞ –≤–ª–æ–∂–µ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –æ–±–ª–∞—Å—Ç–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏. –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –º–æ–≥—É—Ç –≤–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ö—É–∫ Preact `useContext()`, –∫–æ—Ç–æ—Ä—ã–π –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ `Context` –≤ –º–µ—Å—Ç–µ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –≤ –¥–µ—Ä–µ–≤–µ Virtual DOM.

–ü—Ä–∏–≤–µ–¥–µ–º –µ—â–µ —Ä–∞–∑ –ø—Ä–µ–¥—ã–¥—É—â–∏–π –ø—Ä–∏–º–µ—Ä, –Ω–∞ —ç—Ç–æ—Ç —Ä–∞–∑ —Ä–∞–∑–¥–µ–ª–µ–Ω–Ω—ã–π –Ω–∞ –¥–≤–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –∏ –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–π `useContext()` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–µ–∫—É—â–µ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞:

```jsx
import { createContext } from 'preact';
import { useContext } from 'preact/hooks';

const Username = createContext();

export default function App() {
  return (
    <Username.Provider value='–í–∞—Å—è'>
      <div>
        <p>
          <User />
        </p>
      </div>
    </Username.Provider>
  );
}

function User() {
  // –¥–æ—Å—Ç—É–ø –∫ —Ç–µ–∫—É—â–µ–º—É –∏–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞:
  const username = useContext(Username); // "–í–∞—Å—è"
  return <span>{username}</span>;
}
```

–ï—Å–ª–∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç—å —Å–µ–±–µ —Å–ª—É—á–∞–π, –∫–æ–≥–¥–∞ `–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é` –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –∑–Ω–∞—á–µ–Ω–∏—é –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–≤, —Ç–æ –±–æ–ª–µ–µ –ø—Ä–æ—Å—Ç–æ–π API `useContext()` —è–≤–ª—è–µ—Ç—Å—è –ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω—ã–º.

### –†–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

–ë–æ–ª–µ–µ —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–º –≤–∞—Ä–∏–∞–Ω—Ç–æ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –±—ã–ª–æ –±—ã —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (–≤–æ—à–µ–ª –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤ —Å–∏—Å—Ç–µ–º—É –∏–ª–∏ –Ω–µ—Ç).

–î–ª—è —ç—Ç–æ–≥–æ –º—ã –º–æ–∂–µ–º —Å–æ–∑–¥–∞—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–π –Ω–∞–∑–æ–≤–µ–º `AuthContext`. –ó–Ω–∞—á–µ–Ω–∏–µ–º –¥–ª—è AuthContext –±—É–¥–µ—Ç –æ–±—ä–µ–∫—Ç —Å–æ —Å–≤–æ–π—Å—Ç–≤–æ–º `user`, —Å–æ–¥–µ—Ä–∂–∞—â–∏–º –Ω–∞—à–µ–≥–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –∞ —Ç–∞–∫–∂–µ –º–µ—Ç–æ–¥ `setUser` –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —ç—Ç–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è.

```jsx
import { createContext } from 'preact';
import { useState, useMemo, useContext } from 'preact/hooks';

const AuthContext = createContext();

export default function App() {
  const [user, setUser] = useState(null);

  const auth = useMemo(() => {
    return { user, setUser };
  }, [user]);

  return (
    <AuthContext.Provider value={auth}>
      <div class='app'>
        {auth.user && <p>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, {auth.user.name}!</p>}
        <Login />
      </div>
    </AuthContext.Provider>
  );
}

function Login() {
  const { user, setUser } = useContext(AuthContext);

  if (user)
    return (
      <div class='logged-in'>
        –í–æ—à–ª–∏ –≤ —Å–∏—Å—Ç–µ–º—É –∫–∞–∫ {user.name}.<button onClick={() => setUser(null)}>–í—ã–π—Ç–∏</button>
      </div>
    );

  return (
    <div class='logged-out'>
      <button onClick={() => setUser({ name: '–í–∞—Å—è' })}>–í–æ–π—Ç–∏</button>
    </div>
  );
}
```

### –í–ª–æ–∂–µ–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç

–ö–æ–Ω—Ç–µ–∫—Å—Ç –æ–±–ª–∞–¥–∞–µ—Ç —Å–∫—Ä—ã—Ç–æ–π —Å—É–ø–µ—Ä—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å—é, –∫–æ—Ç–æ—Ä–∞—è —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –≤–µ—Å—å–º–∞ –ø–æ–ª–µ–∑–Ω–æ–π –≤ –±–æ–ª—å—à–∏—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö: –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –º–æ–≥—É—Ç –±—ã—Ç—å –≤–ª–æ–∂–µ–Ω—ã –¥—Ä—É–≥ –≤ –¥—Ä—É–≥–∞ –¥–ª—è ¬´–ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è¬ª –∏—Ö –∑–Ω–∞—á–µ–Ω–∏—è –≤ –ø–æ–¥–¥–µ—Ä–µ–≤–µ Virtual DOM. –ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ —Å–µ–±–µ –ø–æ—á—Ç–æ–≤–æ–µ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –≤ –∫–æ—Ç–æ—Ä–æ–º —Ä–∞–∑–ª–∏—á–Ω—ã–µ —á–∞—Å—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–µ URL-–ø—É—Ç–µ–π:

> - `/inbox`: –ø–æ–∫–∞–∑–∞—Ç—å –≤—Ö–æ–¥—è—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è
> - `/inbox/compose`: –ø–æ–∫–∞–∑–∞—Ç—å –ø–∞–ø–∫—É "–í—Ö–æ–¥—è—â–∏–µ" –∏ –Ω–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
> - `/settings`: –ø–æ–∫–∞–∑–∞—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
> - `/settings/forwarding`: –ø–æ–∫–∞–∑–∞—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–µ—Ä–µ–∞–¥—Ä–µ—Å–∞—Ü–∏–∏

–ú—ã –º–æ–∂–µ–º —Å–æ–∑–¥–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `<Route path="...">`, –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –¥–µ—Ä–µ–≤–æ Virtual DOM —Ç–æ–ª—å–∫–æ —Ç–æ–≥–¥–∞, –∫–æ–≥–¥–∞ —Ç–µ–∫—É—â–∏–π –ø—É—Ç—å —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å –∑–∞–¥–∞–Ω–Ω—ã–º —Å–µ–≥–º–µ–Ω—Ç–æ–º –ø—É—Ç–∏. –î–ª—è —É–ø—Ä–æ—â–µ–Ω–∏—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤ –∫–∞–∂–¥—ã–π —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–π –º–∞—Ä—à—Ä—É—Ç –º–æ–∂–µ—Ç –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è—Ç—å ¬´—Ç–µ–∫—É—â–∏–π –ø—É—Ç—å¬ª (–∑–Ω–∞—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞) –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö —Å–≤–æ–µ–≥–æ –ø–æ–¥–¥–µ—Ä–µ–≤–∞, —á—Ç–æ–±—ã –∏—Å–∫–ª—é—á–∏—Ç—å —Ç—É —á–∞—Å—Ç—å –ø—É—Ç–∏, –∫–æ—Ç–æ—Ä–∞—è –±—ã–ª–∞ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∞.

```jsx
import { createContext } from 'preact';
import { useContext } from 'preact/hooks';

const Path = createContext(location.pathname);

function Route(props) {
  const path = useContext(Path); // —Ç–µ–∫—É—â–∏–π –ø—É—Ç—å
  const isMatch = path.startsWith(props.path);
  const innerPath = path.substring(props.path.length);
  return isMatch && <Path.Provider value={innerPath}>{props.children}</Path.Provider>;
}
```

–¢–µ–ø–µ—Ä—å –º—ã –º–æ–∂–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–æ—Ç –Ω–æ–≤—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `Route` –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –ø–æ—á—Ç–æ–≤–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—É `Inbox` –Ω–µ –Ω—É–∂–Ω–æ –∑–Ω–∞—Ç—å —Å–≤–æ–π —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –ø—É—Ç—å, —á—Ç–æ–±—ã –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ `<Route path="...">` –¥–ª—è —Å–≤–æ–∏—Ö –¥–æ—á–µ—Ä–Ω–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:

```jsx
export default function App() {
  return (
    <div class='app'>
      <Route path='/inbox'>
        <Inbox />
      </Route>
      <Route path='/settings'>
        <Settings />
      </Route>
    </div>
  );
}

function Inbox() {
  return (
    <div class='inbox'>
      <div class='messages'> ... </div>
      <Route path='/compose'>
        <Compose />
      </Route>
    </div>
  );
}

function Settings() {
  return (
    <div class='settings'>
      <h1>Settings</h1>
      <Route path='/forwarding'>
        <Forwarding />
      </Route>
    </div>
  );
}
```

### –ó–Ω–∞—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

–í–ª–æ–∂–µ–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç ‚Äî —ç—Ç–æ –º–æ—â–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä—É—é –º—ã —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º, –Ω–µ –æ—Å–æ–∑–Ω–∞–≤–∞—è —ç—Ç–æ–≥–æ. –ù–∞–ø—Ä–∏–º–µ—Ä, –≤ —Å–∞–º–æ–º –ø–µ—Ä–≤–æ–º –∏–ª–ª—é—Å—Ç—Ä–∞—Ç–∏–≤–Ω–æ–º –ø—Ä–∏–º–µ—Ä–µ —ç—Ç–æ–π –≥–ª–∞–≤—ã –º—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ `<Provider value="–í–∞—Å—è">` –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è `Username` –≤ –¥–µ—Ä–µ–≤–µ.

–û–¥–Ω–∞–∫–æ —ç—Ç–æ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–ª–æ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ `Username`. –í—Å–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç—ã –∏–º–µ—é—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, –∫–æ—Ç–æ—Ä–æ–µ —Ä–∞–≤–Ω–æ –∑–Ω–∞—á–µ–Ω–∏—é, –ø–µ—Ä–µ–¥–∞–Ω–Ω–æ–º—É –≤ –∫–∞—á–µ—Å—Ç–≤–µ –ø–µ—Ä–≤–æ–≥–æ –∞—Ä–≥—É–º–µ–Ω—Ç–∞ –≤ `createContext()`. –í –ø—Ä–∏–º–µ—Ä–µ –º—ã –Ω–µ –ø–µ—Ä–µ–¥–∞–≤–∞–ª–∏ –Ω–∏–∫–∞–∫–∏—Ö –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –≤ `createContext`, –ø–æ—ç—Ç–æ–º—É –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –±—ã–ª–æ `undefined`.

–í–æ—Ç –∫–∞–∫ –≤—ã–≥–ª—è–¥–µ–ª –±—ã –ø–µ—Ä–≤—ã–π –ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –±—ã –≤–º–µ—Å—Ç–æ Provider –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–æ—Å—å –∑–Ω–∞—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é:

```jsx
import { createContext } from 'preact';
import { useContext } from 'preact/hooks';

const Username = createContext('–í–∞—Å—è');

export default function App() {
  const username = useContext(Username); // –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç "–í–∞—Å—è"

  return <span>{username}</span>;
}
```

## –ü–æ–ø—Ä–æ–±—É–π—Ç–µ!

–í –∫–∞—á–µ—Å—Ç–≤–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è —Å–æ–∑–¥–∞–¥–∏–º _—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—É—é_ –≤–µ—Ä—Å–∏—é —Å—á—ë—Ç—á–∏–∫–∞, –∫–æ—Ç–æ—Ä—ã–π –º—ã —Ä–µ–∞–ª–∏–∑–æ–≤–∞–ª–∏ –≤ –ø—Ä–µ–¥—ã–¥—É—â–µ–π –≥–ª–∞–≤–µ. –î–ª—è —ç—Ç–æ–≥–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–µ—Ö–Ω–∏–∫—É `useMemo()` –∏–∑ –ø—Ä–∏–º–µ—Ä–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –≤ —ç—Ç–æ–π –≥–ª–∞–≤–µ. –í –∫–∞—á–µ—Å—Ç–≤–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã –º–æ–∂–Ω–æ —Ç–∞–∫–∂–µ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å _–¥–≤–∞_ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞: –æ–¥–∏–Ω –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∑–Ω–∞—á–µ–Ω–∏—è `count`, –∞ –¥—Ä—É–≥–æ–π ‚Äî –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–∏ `increment`, –æ–±–Ω–æ–≤–ª—è—é—â–µ–π —ç—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ.

<solution>
  <h4>üéâ –ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º!</h4>
  <p>–í—ã —É–∑–Ω–∞–ª–∏, –∫–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç –≤ Preact.</p>
</solution>

```js:setup
var output = useRef();

function getCounts() {
  var counts = [];
  var text = output.current.innerText;
  var r = /–°—á—ë—Ç—á–∏–∫:\s*([\w.-]*)/gi;
  while (t = r.exec(text)) {
    var num = Number(t[1]);
    counts.push(isNaN(num) ? t[1] : num);
  }
  return counts;
}

useResult(function (result) {
  output.current = result.output;

  if (getCounts().length !== 3) {
    console.warn('–ü–æ—Ö–æ–∂–µ, —á—Ç–æ –≤—ã –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ `count` –≤ 0.');
  }

  var timer;
  var count = 0;
  var options = require('preact').options;

  var oe = options.event;
  options.event = function(e) {
    if (e.currentTarget.localName !== 'button') return;
    clearTimeout(timer);
    timer = setTimeout(function() {
      var counts = getCounts();
      if (counts.length !== 3) {
        return console.warn('–ü–æ—Ö–æ–∂–µ, –Ω–∞–º –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç –æ–¥–Ω–æ–≥–æ –∏–∑ —Å—á–µ—Ç—á–∏–∫–æ–≤..');
      }
      if (counts[0] !== counts[2] || counts[0] !== counts[1]) {
        return console.warn('–ü–æ—Ö–æ–∂–µ, —á—Ç–æ —Å—á–µ—Ç—á–∏–∫–∏ –Ω–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã.');
      }
      var solved = counts[0] === ++count;
      store.setState({ solved: solved });
    }, 10);
    if (oe) return oe.apply(this, arguments);
  }

  return function () {
    options.event = oe;
  };
}, []);
```

```jsx:repl-initial
import { render, createContext } from 'preact';
import { useState, useContext, useMemo } from 'preact/hooks';

const CounterContext = createContext(null);

function Counter() {
  return (
    <div style={{ background: '#eee', padding: '10px' }}>
      <p>–°—á—ë—Ç—á–∏–∫: {'MISSING'}</p>
      <button>–î–æ–±–∞–≤–∏—Ç—å</button>
    </div>
  );
}

function App() {
  const [count, setCount] = useState(0);

  return (
    <div style={{ display: 'flex', gap: '20px' }}>
      <Counter />
      <Counter />
      <Counter />
    </div>
  )
}

render(<App />, document.getElementById("app"));
```

```jsx:repl-final
import { render, createContext } from 'preact';
import { useState, useContext, useMemo } from 'preact/hooks';

const CounterContext = createContext(null);

function Counter() {
  const { count, increment } = useContext(CounterContext);

  return (
    <div style={{ background: '#eee', padding: '10px' }}>
      <p>–°—á—ë—Ç—á–∏–∫: {count}</p>
      <button onClick={increment}>–î–æ–±–∞–≤–∏—Ç—å</button>
    </div>
  );
}

function App() {
  const [count, setCount] = useState(0);

  function increment() {
    setCount(count + 1);
  }

  const counter = useMemo(() => {
    return { count, increment };
  }, [count]);

  return (
    <CounterContext.Provider value={counter}>
      <div style={{ display: 'flex', gap: '20px' }}>
        <Counter />
        <Counter />
        <Counter />
      </div>
    </CounterContext.Provider>
  )
}

render(<App />, document.getElementById("app"));
```
