---
title: –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
prev: /tutorial/08-keys
next: /tutorial/10-links
solvable: true
---

# –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

JavaScript ‚Äî –≥–∏–±–∫–∏–π –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä—É–µ–º—ã–π —è–∑—ã–∫, –∞ –∑–Ω–∞—á–∏—Ç, –Ω–∞ –Ω—ë–º –º–æ–∂–Ω–æ –æ—á–µ–Ω—å –ª–µ–≥–∫–æ –≤—Å—Ç—Ä–µ—Ç–∏—Ç—å –æ—à–∏–±–∫–∏ –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è. –ë—É–¥—å —Ç–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –Ω–µ–ø—Ä–µ–¥–≤–∏–¥–µ–Ω–Ω–æ–≥–æ —Å—Ü–µ–Ω–∞—Ä–∏—è –∏–ª–∏ –æ—à–∏–±–∫–∞ –≤ –Ω–∞–ø–∏—Å–∞–Ω–Ω–æ–º –Ω–∞–º–∏ –∫–æ–¥–µ, –≤–∞–∂–Ω–æ —É–º–µ—Ç—å –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –æ—à–∏–±–∫–∏ –∏ —Ä–µ–∞–ª–∏–∑–æ–≤—ã–≤–∞—Ç—å –Ω–µ–∫–æ—Ç–æ—Ä—É—é —Ñ–æ—Ä–º—É –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –∏–ª–∏ –∏–∑—è—â–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫.

–í Preact –¥–ª—è —ç—Ç–æ–≥–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–µ—Ä–µ—Ö–≤–∞—Ç –æ—à–∏–±–æ–∫ –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏—Ö –≤ –≤–∏–¥–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—É –ø–µ—Ä–µ—Ö–≤–∞—Ç–∏—Ç—å –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–π –∏–ª–∏ –Ω–µ—Ä–∞–±–æ—Ç–∞—é—â–∏–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –∏ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ —á–µ–≥–æ-—Ç–æ –¥—Ä—É–≥–æ–≥–æ –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∑–∞–ø–∞—Å–Ω–æ–≥–æ –≤–∞—Ä–∏–∞–Ω—Ç–∞.

### –ü—Ä–µ–≤—Ä–∞—â–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

–î–ª—è –ø–µ—Ä–µ—Ö–≤–∞—Ç–∞ –æ—à–∏–±–æ–∫ –∏ –ø—Ä–µ–≤—Ä–∞—â–µ–Ω–∏—è –∏—Ö –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω—ã –¥–≤–∞ API: `componentDidCatch` –∏ `getDerivedStateFromError`. –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –æ–Ω–∏ –ø–æ—Ö–æ–∂–∏, –∏ –æ–±–∞ —è–≤–ª—è—é—Ç—Å—è –º–µ—Ç–æ–¥–∞–º–∏, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –≤ –∫–ª–∞—Å—Å–æ–≤–æ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ.

**componentDidCatch** –ø–æ–ª—É—á–∞–µ—Ç –∞—Ä–≥—É–º–µ–Ω—Ç `Error` –∏ –º–æ–∂–µ—Ç —Ä–µ—à–∞—Ç—å, —á—Ç–æ –¥–µ–ª–∞—Ç—å –≤ –æ—Ç–≤–µ—Ç –Ω–∞ —ç—Ç—É –æ—à–∏–±–∫—É –≤ –∫–∞–∂–¥–æ–º –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º —Å–ª—É—á–∞–µ. –û–Ω –º–æ–∂–µ—Ç –≤—ã–∑–≤–∞—Ç—å –º–µ—Ç–æ–¥ `this.setState()` –¥–ª—è –æ—Ç—Ä–∏—Å–æ–≤–∫–∏ –∑–∞–ø–∞—Å–Ω–æ–≥–æ –∏–ª–∏ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ–≥–æ –¥–µ—Ä–µ–≤–∞, –∫–æ—Ç–æ—Ä—ã–π ¬´–ø–æ–π–º–∞–µ—Ç¬ª –æ—à–∏–±–∫—É –∏ –ø–æ–º–µ—Ç–∏—Ç –µ—ë –∫–∞–∫ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—É—é. –ò–ª–∏ –∂–µ –º–µ—Ç–æ–¥ –º–æ–∂–µ—Ç –ø—Ä–æ—Å—Ç–æ –∑–∞–ø–∏—Å–∞—Ç—å –æ—à–∏–±–∫—É –≤ –∂—É—Ä–Ω–∞–ª –∏ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Ä–∞–±–æ—Ç—É –±–µ–∑ –æ–±—Ä–∞–±–æ—Ç–∫–∏ (–∞–≤–∞—Ä–∏–π–Ω–æ –∑–∞–≤–µ—Ä—à–∏—Ç—å —Ä–∞–±–æ—Ç—É).

**getDerivedStateFromError** ‚Äî —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –º–µ—Ç–æ–¥, –ø—Ä–∏–Ω–∏–º–∞—é—â–∏–π `Error`, –∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—â–∏–π –æ–±—ä–µ–∫—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∫ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—É —á–µ—Ä–µ–∑ `setState()`. –ü–æ—Å–∫–æ–ª—å–∫—É —ç—Ç–æ—Ç –º–µ—Ç–æ–¥ –≤—Å–µ–≥–¥–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è, –ø—Ä–∏–≤–æ–¥—è—â–µ–µ –∫ –ø–µ—Ä–µ—Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞, –æ–Ω –≤—Å–µ–≥–¥–∞ –ø–æ–º–µ—á–∞–µ—Ç –æ—à–∏–±–∫–∏ –∫–∞–∫ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ.

–í —Å–ª–µ–¥—É—é—â–µ–º –ø—Ä–∏–º–µ—Ä–µ –ø–æ–∫–∞–∑–∞–Ω–æ, –∫–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª—é–±–æ–π –∏–∑ —ç—Ç–∏—Ö –º–µ—Ç–æ–¥–æ–≤ –¥–ª—è –ø–µ—Ä–µ—Ö–≤–∞—Ç–∞ –æ—à–∏–±–æ–∫ –∏ –≤—ã–≤–æ–¥–∞ –∏–∑—è—â–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–µ –≤–º–µ—Å—Ç–æ –∞–≤–∞—Ä–∏–π–Ω–æ–≥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:

```jsx
import { Component } from 'preact';

class ErrorBoundary extends Component {
  state = { error: null };

  static getDerivedStateFromError(error) {
    return { error: error.message };
  }

  componentDidCatch(error) {
    console.error(error);
    this.setState({ error: error.message });
  }

  render() {
    if (this.state.error) {
      return <p>–û –Ω–µ—Ç! –ú—ã —Å—Ç–æ–ª–∫–Ω—É–ª–∏—Å—å —Å –æ—à–∏–±–∫–æ–π: {this.state.error}</p>;
    }
    return this.props.children;
  }
}
```

–ü—Ä–∏–≤–µ–¥—ë–Ω–Ω—ã–π –≤—ã—à–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —è–≤–ª—è–µ—Ç—Å—è –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—ë–Ω–Ω—ã–º –ø—Ä–∏–º–µ—Ä–æ–º —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö Preact, —á–∞—Å—Ç–æ –Ω–∞–∑—ã–≤–∞–µ–º—ã–º _Error Boundary_ (¬´–≥—Ä–∞–Ω–∏—Ü–∞ –æ—à–∏–±–∫–∏¬ª –∏–ª–∏ ¬´–ø—Ä–µ–¥–æ—Ö—Ä–∞–Ω–∏—Ç–µ–ª—å¬ª).

### –í–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç—å –∏ –≤—Å–ø–ª—ã–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫

–û—à–∏–±–∫–∏, –≤–æ–∑–Ω–∏–∫–∞—é—â–∏–µ –ø—Ä–∏ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–µ –¥–µ—Ä–µ–≤–∞ Virtual DOM –≤ Preact, ¬´–≤—Å–ø–ª—ã–≤–∞—é—Ç¬ª, –ø–æ–¥–æ–±–Ω–æ —Å–æ–±—ã—Ç–∏—è–º DOM. –ù–∞—á–∏–Ω–∞—è —Å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞, –≤—Å—Ç—Ä–µ—Ç–∏–≤—à–µ–≥–æ –æ—à–∏–±–∫—É, –∫–∞–∂–¥–æ–º—É —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–º—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—É –≤ –¥–µ—Ä–µ–≤–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –æ—à–∏–±–∫—É.

–í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ _–ø—Ä–µ–¥–æ—Ö—Ä–∞–Ω–∏—Ç–µ–ª–∏_ –º–æ–≥—É—Ç –±—ã—Ç—å –≤–ª–æ–∂–µ–Ω–Ω—ã–º–∏, –µ—Å–ª–∏ –æ–Ω–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º `componentDidCatch`. –ï—Å–ª–∏ –º–µ—Ç–æ–¥ `componentDidCatch()` –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ _–Ω–µ_ –≤—ã–∑—ã–≤–∞–µ—Ç `setState()`, –æ—à–∏–±–∫–∞ –±—É–¥–µ—Ç –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è—Ç—å—Å—è –ø–æ –¥–µ—Ä–µ–≤—É Virtual DOM –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ –Ω–µ –¥–æ—Å—Ç–∏–≥–Ω–µ—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ —Å –º–µ—Ç–æ–¥–æ–º `componentDidCatch`, –∫–æ—Ç–æ—Ä—ã–π _–≤—ã–∑—ã–≤–∞–µ—Ç_ `setState()`.

## –ü–æ–ø—Ä–æ–±—É–π—Ç–µ!

–ß—Ç–æ–±—ã –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞—à–∏ –∑–Ω–∞–Ω–∏—è –≤ –æ–±–ª–∞—Å—Ç–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫, –¥–∞–≤–∞–π—Ç–µ –¥–æ–±–∞–≤–∏–º –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ –≤ –ø—Ä–æ—Å—Ç–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç _App_. –û–¥–∏–Ω –∏–∑ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –≤–Ω—É—Ç—Ä–∏ _App_ –º–æ–∂–µ—Ç –≤—ã–¥–∞—Ç—å –æ—à–∏–±–∫—É –≤ –∫–∞–∫–æ–º-–ª–∏–±–æ —Å—Ü–µ–Ω–∞—Ä–∏–∏, –∏ –º—ã —Ö–æ—Ç–∏–º –ø–µ—Ä–µ—Ö–≤–∞—Ç–∏—Ç—å –µ—ë, —á—Ç–æ–±—ã –≤—ã–¥–∞—Ç—å –¥—Ä—É–∂–µ–ª—é–±–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é, —á—Ç–æ –º—ã —Å—Ç–æ–ª–∫–Ω—É–ª–∏—Å—å —Å –Ω–µ–ø—Ä–µ–¥–≤–∏–¥–µ–Ω–Ω–æ–π –æ—à–∏–±–∫–æ–π.

<solution>
  <h4>üéâ –ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º!</h4>
  <p>–í—ã —É–∑–Ω–∞–ª–∏, –∫–∞–∫ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –æ—à–∏–±–∫–∏ –≤ –∫–æ–¥–µ Preact!</p>
</solution>

```js:setup
useResult(function(result) {
  var options = require('preact').options;

  var oe = options.__e;
  options.__e = function(error, s) {
    if (/objects are not valid/gi.test(error)) {
      throw Error('–ü–æ—Ö–æ–∂–µ, —á—Ç–æ –≤—ã –ø—ã—Ç–∞–µ—Ç–µ—Å—å –≤—ã–≤–µ—Å—Ç–∏ –æ–±—ä–µ–∫—Ç Error –Ω–∞–ø—Ä—è–º—É—é: –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å `error.message` –≤–º–µ—Å—Ç–æ —Å–∞–º–æ–≥–æ `error`..');
    }
    oe.apply(this, arguments);
    setTimeout(function() {
      if (result.output.textContent.match(/–æ—à–∏–±–∫–∞/i)) {
        solutionCtx.setSolved(true);
      }
    }, 10);
  };

  return function () {
    options.__e = oe;
  };
}, []);
```

```jsx:repl-initial
import { render, Component } from 'preact';
import { useState } from 'preact/hooks';

function Clicker() {
  const [clicked, setClicked] = useState(false);

  if (clicked) {
    throw new Error('–û—à–∏–±–∫–∞');
  }

  return <button onClick={() => setClicked(true)}>–ù–∞–∂–º–∏ –º–µ–Ω—è</button>;
}

class App extends Component {
  state = { error: null };

  render() {
    return <Clicker />;
  }
}

render(<App />, document.getElementById("app"));
```

```jsx:repl-final
import { render, Component } from 'preact';
import { useState } from 'preact/hooks';

function Clicker() {
  const [clicked, setClicked] = useState(false);

  if (clicked) {
    throw new Error('–û—à–∏–±–∫–∞');
  }

  return <button onClick={() => setClicked(true)}>–ù–∞–∂–º–∏ –º–µ–Ω—è</button>;
}

class App extends Component {
  state = { error: null };

  componentDidCatch(error) {
    this.setState({ error: error.message });
  }

  render() {
    const { error } = this.state;
    if (error) {
      return <p>–û –Ω–µ—Ç! –ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞: {error}</p>
    }
    return <Clicker />;
  }
}

render(<App />, document.getElementById("app"));
```
